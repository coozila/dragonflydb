
<p align="center">
    <a href="https://twitter.com/coozila" target="__blank">
        <img src="https://img.shields.io/badge/Follow%20on%20Twitter-green?style=social" alt="Follow on Twitter" />
    </a>
    <a href="https://www.facebook.com/coozila" target="__blank">
        <img src="https://img.shields.io/badge/Follow%20on%20Facebook-green?style=social" alt="Follow on Facebook" />
    </a>
</p>



<p align="center">
    <img width="233px" height=auto src="https://www.coozila.com/static/themes/prometheus/img/coozila.png" />
</p>



<p align="center">
    <a href="https://github.com/coozila/dragonflydb/releases" target="__blank">
        <img src="https://img.shields.io/badge/dynamic/json?color=green&label=downloads&query=downloads&url=https://raw.githubusercontent.com/coozila/dragonflydb/master/metrics.yml" alt="Total Downloads" />
    </a>
    <a href="https://github.com/coozila/dragonflydb" target="__blank">
        <img src="https://img.shields.io/badge/dynamic/json?color=yellow&label=stars&query=stars&url=https://raw.githubusercontent.com/coozila/dragonflydb/master/metrics.yml" alt="GitHub Stars" />
    </a>
    <a href="https://github.com/coozila/dragonflydb" target="__blank">
        <img src="https://img.shields.io/badge/dynamic/json?color=blue&label=forks&query=forks&url=https://raw.githubusercontent.com/coozila/dragonflydb/master/metrics.yml" alt="GitHub Forks" />
    </a>
    <a href="https://github.com/coozila/dragonflydb/blob/main/LICENSE" target="__blank">
        <img src="https://img.shields.io/badge/license-MIT-1c7ed6" alt="License" />
    </a>
    <a href="https://github.com/coozila/dragonflydb/issues" target="__blank">
        <img src="https://img.shields.io/badge/dynamic/json?color=red&label=open%20issues&query=open_issues&url=https://raw.githubusercontent.com/coozila/dragonflydb/master/metrics.yml" alt="Open Issues" />
    </a>
</p>



## Sponsors

**If you want to support our project and help us grow it, you can [become a sponsor on GitHub](https://github.com/sponsors/coozila)

<p align="center">
  <a href="https://github.com/sponsors/coozila">
  </a>
</p>

# DragonflyDB Cluster

## Coozila! Docker Package APP for Memcached Cluster with DragonflyDB and McRouter

The **Coozila! Package for Memcached Cluster** integrates **DragonflyDB** and **McRouter**, delivering a cutting-edge caching solution tailored for modern applications. Designed to maximize scalability and performance, this package empowers developers to deploy a distributed caching layer effortlessly, alleviating database load while significantly improving response times.

### Why Choose Coozila?

- **Simplified Scalability**: Deploy a highly efficient distributed caching layer using pre-configured Docker packages, reducing complexity and ensuring faster response times.
- **Intelligent Request Routing**: Take advantage of McRouter's advanced capabilities, including prefix routing, replicated pools, and failover mechanisms, for seamless cache operation.
- **Blazing-Fast Performance**: With DragonflyDB at its core, Coozila! offers a high-speed, fault-tolerant caching system optimized for high-demand environments.
- **Dynamic Configuration**: Easily manage and scale your caching infrastructure with live updates, ensuring zero downtime.
- **Multi-Level Caching**: Implement tiered caching with local and remote caches for enhanced data retrieval efficiency.

### Core Features

- **High Availability**: Ensure reliable data storage with integrated failover and replication mechanisms, even during node failures.
- **Optimized Caching**: Leverage McRouter to route requests efficiently across multiple Memcached servers, achieving better load balancing and resource management.
- **Advanced Routing Logic**: Configure routing based on prefixes, clusters, or custom policies using McRouter’s modular routing handles.
- **Cold Cache Warmup**: Bring new cache nodes online seamlessly without impacting application performance.
- **Rich Monitoring Tools**: Access detailed statistics and debugging commands for complete visibility into cache performance.
- **Security First**: Utilize built-in SSL support and IPv6 compatibility to secure data in transit.
- **Multi-Threaded Architecture**: Harness the power of multi-core systems for efficient request handling.

### Easy Deployment

The package comes with pre-configured Docker containers and a straightforward setup process, enabling developers to get started quickly. With Coozila!, you can build a scalable, reliable caching infrastructure in minutes.

### Who Is It For?

- **Developers**: Looking to enhance application performance through efficient caching strategies.
- **Organizations**: Seeking to reduce database overhead while achieving faster response times with minimal complexity.
- **Teams**: Needing a robust and scalable caching solution for web applications, APIs, or data-intensive systems.

Elevate your application's performance with **Coozila! Memcached Cluster**—a powerful caching solution combining the reliability of DragonflyDB and the flexibility of McRouter. Whether you're handling high-demand environments or scaling for future growth, Coozila! is your go-to package for effortless deployment and unparalleled efficiency.


## Contributing

We welcome contributions to this project! Please refer to our [Contributing Guidelines](CONTRIBUTING.md) for detailed instructions on how to contribute.

For questions or contributions, feel free to contact the **Coozila! Lab** at [lab@coozila.com](mailto:lab@coozila.com).


### Code of Conduct

We are committed to fostering an inclusive and respectful environment. Please review our [Contributor Code of Conduct](CODE_OF_CONDUCT.md) for guidelines on acceptable behavior.

---

## References and Credits

We extend our gratitude to the creators and maintainers of the tools and technologies that power this project. Below are some key references:

### Websites:

- [Introducing McRouter: A Memcached Protocol Router for Scaling Memcached Deployments](https://engineering.fb.com/2014/09/15/web/introducing-mcrouter-a-memcached-protocol-router-for-scaling-memcached-deployments/)
- [Docker Hub Official Website](https://hub.docker.com/)
- [DragonflyDB Official Website](https://www.dragonflydb.io/)
- [Memcached Official Website](https://memcached.org/)
- [Coozila! AGI Official Website](https://agi.coozila.com/)
- [Coozila! AGI Developer API](https://agi.coozila.com/api/docs/)
- [Coozila! Official Website](https://www.coozila.com/)
- [Github Official Website](https://github.com/)

### Github:

- [DragonflyDB GitHub Repository](https://github.com/dragonflydb/dragonfly)
- [McRouter GitHub Repository](https://github.com/facebook/mcrouter)
- [Memcached GitHub Repository](https://github.com/memcached/memcached)
- [Coozila! Github main Repository](https://github.com/coozila)

### Acknowledgments:

Special thanks to **Sandeep Kongathi** for the inspiration behind this project.
- Blog: [HA Memcached with McRouter with UI on Docker Compose](https://kn-sandeep.medium.com/ha-memcached-with-mcrouter-with-ui-on-docker-compose-5eca2989afdd)  
- Website: [https://kn-sandeep.medium.com/](https://kn-sandeep.medium.com/)
- Github: [Sandeep Kongathi](https://github.com/sandeep540)

### AI Contributions:

We would also like to acknowledge **Hypatia AI**, a project of Coozila! AGI, for providing intelligent assistance and support in developing this documentation and enhancing the overall project experience.

---

### What is Memcached?

Memcached is a high-performance, distributed memory object caching system, generic in nature, but intended for use in speeding up dynamic web applications by alleviating database load. It is designed to cache data and reduce the number of times a database must be queried, thereby improving the speed and performance of applications.

### What is DragonFly?

DragonFly is a distributed database that provides a powerful, scalable, and fault-tolerant solution designed for high availability and performance. It is optimized for use cases that require efficient data retrieval and storage, making it an ideal complement to Memcached in clustered environments.

### What is McRouter?

McRouter is a high-performance Memcached router developed by Facebook. It acts as a proxy between clients and Memcached servers, allowing for better load balancing and routing of requests. McRouter can be used to scale Memcached deployments efficiently, enabling applications to handle larger amounts of cached data and improving overall performance.

### Overview of Memcached, DragonFly, and McRouter

Memcached, DragonFly, and McRouter work together to provide a robust caching and database solution for high-demand applications. By utilizing Memcached for caching frequently accessed data, applications can significantly reduce response times and database load. DragonFly, with its distributed architecture, ensures that data is stored reliably and can be accessed quickly, while McRouter optimizes the routing of requests to Memcached servers.

## Copyright

```
Copyright (C) 2009 - 2024 Coozila! MIT License
See the full license at: [Coozila! License](https://github.com/coozila/dragonflydb/license.md)
```

## Project Structure

- **Docker Compose Configuration**: Defines services for DragonflyDB and McRouter.
- **Networks**: Configured for application services.
- **Volumes**: Data persistence for DragonflyDB instances.

## Services

### DragonflyDB Servers

Three instances of DragonflyDB are configured:

1. **dragonfly1**
2. **dragonfly2**
3. **dragonfly3**

Each instance:
- Uses the image `docker.dragonflydb.io/dragonflydb/dragonfly`.
- Sets memory lock limits.
- Maps port `11211` to local ports `11212`, `11213`, and `11214`.
- Persists data in separate volumes.

### McRouter

- Image: `coozila/mcrouter:40.0.0`
- Links to the three DragonflyDB instances.
- Command configuration for routing operations.

## Prerequisites

Before you begin, ensure you have the following installed on your system:

- [Docker Engine](https://docs.docker.com/engine/install/)
- [Docker Compose](https://docs.docker.com/compose/install/)

## Getting Started

### 1. Create the Private Network

Before building the containers and images, you must manually create the `stack_private_network` Exemple:

```bash
docker network create --driver bridge stack_private_network --subnet=172.16.0.0/
```

Alternatively, you can personalize your network according to your preferences directly in your docker-compose.yaml file like this:


```yaml

#   STACK NETWORK    ---------------------------------------------------------------#

networks:                                                                           #

    #   Private network for application services    --------------------------------#

    stack_private_network:
        driver: bridge 
        driver_opts:
            com.docker.network.enable_ipv6: "false"
        ipam:
            driver: default
            config:
                - subnet: 172.16.238.0/24
                  gateway: 172.16.238.1


# ----------------------------------------------------------------------------------#

```

> [!TIP]
> For better performance, using the host network mode is often the best choice, depending on the structure of the application in which you want to integrate the cluster. This mode can reduce latency and improve speed, but keep in mind that it may expose your services directly to the host network.
> 
> Additionally, Docker is not the most efficient for managing disk I/O. It is advisable to manage volumes on an alternative path or directly by the system, or to use another file system. This may require customization to achieve the best performance.
> 
> Depending on your specific configuration and preferences, you should choose the solution that best fits your needs. Assessing the trade-offs between ease of use, performance, and security is essential. In some cases, using the default Docker settings may be sufficient, while in others, adapting the network and volume configuration may bring significant benefits in terms of speed and operational efficiency.
> 
> Ultimately, the choice of network mode and volume management strategy should align with your application's requirements and the environment in which it will be deployed.


### 2. Clone the Repository

Clone the Coozila! Apps repository to your local machine:

```bash
git clone https://github.com/coozila/dragonflydb.git
cd dragonflydb
```

> [!TIP]
>  Before proceeding, please ensure you are on the correct branch and using the appropriate version of the application. The `dev` branch is continuously updated and may contain untested errors. For stability, it is recommended to download and use version `1.0.0`, which is the last published stable version.

### 3. Checkout Version 1.0.0

Switch to the stable version `1.0.0`:

```bash
git checkout 1.0.0
```

### 4. Prepare the Environment Variables

Copy the example environment file and set the necessary variables:

```bash
cp .env.example .env
```

Edit the `.env` file to set the required environment variables.

### 5. Launch the Application

Run the following command to launch the application:

```bash
docker compose up -d
```

### 6. Accessing the Services

- DragonflyDB instances:
  - Instance 1: [http://127.0.0.1:11212](http://127.0.0.1:11212)
  - Instance 2: [http://127.0.0.1:11213](http://127.0.0.1:11213)
  - Instance 3: [http://127.0.0.1:11214](http://127.0.0.1:11214)

- McRouter interface:
  - [http://127.0.0.1:11211](http://127.0.0.1:11211)

## Cleanup

To stop and remove all containers, networks, and volumes, run:

```bash
docker compose down
```

## Installation Assistance

If you would like assistance with the installation of this product, please contact **Coozila! Lab** at [lab@coozila.com](mailto:lab@coozila.com). Our team is ready to help you with the installation process and ensure a smooth setup.

Based on the size and complexity of your project, we will provide you with a tailored pricing quote.

For purchasing the installation, please visit the following link: [Coozila Docker Package App for Memcached](https://www.coozila.com/plus/view-product/coozila-docker-package-app-for-memcached).

You can also check out the official Coozila! Lab page for more information: [Coozila! Lab](https://www.coozila.com/plus/view-organization-profile/coozila-lab).

For any inquiries, feel free to reach out through our contact page: [Contact Coozila!](https://www.coozila.com/plus/contact).

### After Purchase Notes

After your purchase, please provide the following information via email:

- Server login credentials
- An SSH key for secure access
- Details about the project you wish to integrate

## Additional Documentation

For more details, please refer to the main repository: 

- [Coozila! Apps](https://github.com/coozila/apps).
- [Mcrouter](https://github.com/facebook/mcrouter)
- [DragonflyDB](https://github.com/dragonflydb/dragonfly/tree/main/docs)

## Trademarks

This software listing is packaged by Coozila!. The respective trademarks mentioned in the offering are owned by the respective companies, and use of them does not imply any affiliation or endorsement.

## License

- This project is licensed under the MIT License. See the full license at: [Coozila! License](https://github.com/coozila/dragonflydb/blob/master/LICENSE).
  
- For the DragonflyDB application, please refer to the license in: [DragonflyDB License](https://github.com/dragonflydb/dragonfly/blob/main/LICENSE.md).

- For McRouter, see the license in: [McRouter License](https://github.com/facebook/mcrouter/blob/main/LICENSE).

- For Memcached, see the license in: [Memcached License](https://github.com/memcached/memcached/blob/master/LICENSE).


## Disclaimer

This product is provided "as is," without any guarantees or warranties regarding its functionality, performance, or reliability. By using this product, you acknowledge that you do so at your own risk. Coozila! and its contributors are not liable for any issues, damages, or losses that may arise from the use of this product. We recommend thoroughly testing the product in your own environment before deploying it in a production setting.

Happy coding!
